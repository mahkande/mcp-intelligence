# Pylance MCP Pro

**Professional Python Intelligence Server with REST API and AI Features**

A production-ready Model Context Protocol (MCP) server that provides enhanced Pylance/Pyright language server capabilities with REST API access, AI-powered code analysis, and OpenTelemetry tracing.

## ğŸ¯ What Makes This Different?

Unlike Microsoft's standard Pylance server, **Pylance MCP Pro** includes:

- âœ… **REST API** - HTTP endpoints for web/mobile integration
- âœ… **AI Features** - Claude-powered type error explanations (Pro tier)
- âœ… **API Key Authentication** - Secure access with tier-based rate limiting
- âœ… **OpenTelemetry Tracing** - Monitor performance and debug issues
- âœ… **Conversation Logging** - Track AI interactions for analysis
- âœ… **Advanced Code Intelligence** - Enhanced completions and diagnostics
- âœ… **Professional Branding** - Shows up distinctly in VS Code
- âœ… **Custom Tools** - 12 specialized Python analysis tools

## ğŸŒ Access Methods

### 1. MCP Protocol (Claude Desktop, Continue, Cursor)

Traditional MCP client integration via stdio.

### 2. REST API (Web/Mobile Apps)

HTTP endpoints for any application:
```bash
curl -X POST https://api.pylancemcp.com/api/v1/analyze \
  -H "X-API-Key: pmcp_your_key" \
  -H "Content-Type: application/json" \
  -d '{"file_path": "test.py", "content": "x: int = \"hello\""}'
```

See [API_TESTING_GUIDE.md](API_TESTING_GUIDE.md) for full documentation.

## ğŸš€ Quick Installation

### One-Line Install:

```bash
python install_to_vscode.py
```

Then reload VS Code (Ctrl+Shift+P â†’ "Developer: Reload Window")

### Manual Installation:

Add to your VS Code `settings.json`:

```json
{
  "mcpServers": {
    "pylance-mcp-pro": {
      "command": "/path/to/.venv/Scripts/python.exe",
      "args": ["/path/to/server.py"],
      "env": {
        "WORKSPACE_ROOT": "${workspaceFolder}"
      },
      "enabled": true
    }
  },
  "chat.mcp.autostart": "always"
}
```

## ğŸ”§ Finding Your Tools in VS Code

After installation and reload:

1. **Open Copilot Chat** (Ctrl+Alt+I)
2. **Click the ğŸ”§ tools icon** in the chat input area
3. **Look for "pylance-mcp-pro"** (your custom server!)
4. You'll see all 12 tools listed

**Note:** This shows up separately from Microsoft's "pylance" server.

## ğŸ› ï¸ Available Tools (12)

### Code Intelligence:
- `get_completions` - Intelligent code completions with full type info
- `get_hover` - Type hints and documentation on hover
- `get_definition` - Go to definition across workspace
- `get_references` - Find all references to symbols

### Code Quality:
- `get_diagnostics` - Errors, warnings, and type issues
- `format_document` - Professional code formatting
- `rename_symbol` - Safe refactoring across files

### Navigation:
- `get_signature_help` - Function signatures and parameters
- `get_document_symbols` - File outline and structure
- `get_workspace_symbols` - Project-wide symbol search

### Operations:
- `apply_workspace_edit` - Apply code changes safely
- `health_check` - Monitor server status

## ğŸ“Š Features

### OpenTelemetry Tracing
Monitor your code intelligence operations in real-time with the AI Toolkit trace viewer.

### Smart Environment Detection
Automatically detects and uses:
- Virtual environments (.venv, venv, env)
- Python version from your project
- Workspace-specific configurations

### Professional Integration
- Seamless Copilot Chat integration
- Natural language queries
- Automatic tool selection
- Context-aware responses

## ğŸ’¬ Usage Examples

Just ask naturally in Copilot Chat:

```
"What's the type of this variable?"
"Show me all references to calculate_total"
"Are there any type errors in this file?"
"Get completions for line 42, column 10"
"Format this document"
```

The appropriate tools are invoked automatically!

## ğŸ” Verification

Check if it's running:

1. **View â†’ Output**
2. **Select "pylance-mcp-pro" from dropdown**
3. Should show: "Discovered 12 tools"

Or run the test:
```bash
python server.py --test
```

## ğŸ“ For Users Installing Your Server

When someone installs this:

1. They run `python install_to_vscode.py`
2. Reload VS Code
3. Open Copilot Chat
4. Click ğŸ”§ â†’ See "pylance-mcp-pro" listed
5. Start asking Python questions!

**The tools appear professionally in the Configure Tools menu!**

## ğŸ†š vs Microsoft's Pylance

| Feature | Microsoft Pylance | Pylance MCP Pro |
|---------|------------------|-----------------|
| Basic Language Intelligence | âœ… | âœ… |
| OpenTelemetry Tracing | âŒ | âœ… |
| Conversation Logging | âŒ | âœ… |
| Custom MCP Tools | âŒ | âœ… (12 tools) |
| Shows in Configure Tools | Default | Distinct entry |
| Professional Branding | Generic | Branded |

## ğŸ“ Configuration

All settings in `settings.json`:

```json
{
  "mcpServers": {
    "pylance-mcp-pro": {
      "command": "python.exe",
      "args": ["server.py"],
      "env": {
        "WORKSPACE_ROOT": "${workspaceFolder}"
      },
      "enabled": true
    }
  }
}
```

## ğŸ› Troubleshooting

### Tools not showing?
- Reload VS Code
- Check Output panel for "pylance-mcp-pro"
- Verify `chat.mcp.autostart` is "always"

### Wrong server running?
- Look for "pylance-mcp-pro" not "pylance"
- Microsoft's is built-in, yours is custom

### Need help?
- Run `python server.py --test`
- Check MCP_USAGE.md
- Review Output panel logs

## ğŸ‰ Success!

When you see in Output:
```
Starting server pylance-mcp-pro
Discovered 12 tools
```

**You're ready to go!** ğŸš€

Your professional Python intelligence server is running and available in Copilot Chat's Configure Tools menu.
